<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday Card üéâ</title>
<style>
  :root{
    --bg1: linear-gradient(135deg,#f8c6ff 0%, #ffd9b3 50%, #c6f6ff 100%);
    --card-bg: rgba(255,255,255,0.9);
    --accent: #26a69a;
    --accent-2: #6a4ed6;
    --glass: rgba(255,255,255,0.6);
  }
  html,body{height:100%;margin:0;font-family: 'Segoe UI', Roboto, system-ui, -apple-system;}
  body{
    display:flex;align-items:center;justify-content:center;
    background:var(--bg1);padding:28px;
    -webkit-font-smoothing:antialiased;
  }

  .stage{
    width:900px; max-width:96vw; min-height:520px;
    position:relative; border-radius:18px; overflow:hidden;
    box-shadow: 0 20px 50px rgba(40,30,60,0.18);
    background: radial-gradient(1200px 400px at 10% 20%, rgba(255,255,255,0.6), transparent 10%),
                radial-gradient(1000px 400px at 90% 80%, rgba(255,255,255,0.5), transparent 10%),
                var(--card-bg);
    display:grid; grid-template-columns: 1fr 420px;
  }

  /* Left: the card */
  .card-side{
    padding:36px; display:flex; flex-direction:column; gap:16px; align-items:flex-start;
    position:relative;
  }

  .title{
    font-size:28px; font-weight:700; color:#2b2b2b; letter-spacing:0.2px;
    display:flex; align-items:center; gap:12px;
  }

  .subtitle{ color:#5b5b5b; margin-top:-4px; font-size:13px; }

  .control{
    margin-top:10px; display:flex; gap:10px; align-items:center;
  }
  input[name="name"]{
    padding:10px 12px; border-radius:10px; border:1px solid rgba(0,0,0,0.08);
    outline:none; font-size:15px; width:220px;
    background:transparent;
  }
  button.cta{
    padding:10px 16px; border-radius:12px; border:none; cursor:pointer;
    background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:white;
    font-weight:700; box-shadow: 0 6px 18px rgba(102,51,153,0.18);
  }
  button.ghost{
    background:transparent; border:1px solid rgba(0,0,0,0.06); color:#333;
  }

  /* Right: preview */
  .preview{
    background: linear-gradient(180deg,#fff8ff 0%, #ffffff 60%);
    padding:18px; display:flex; align-items:center; justify-content:center;
    position:relative;
  }
  .card-frame{
    width:360px; height:480px; border-radius:14px; position:relative; overflow:hidden;
    background: linear-gradient(180deg,#fff1f5, #fffaf0);
    box-shadow: inset 0 2px 18px rgba(255,255,255,0.6), 0 10px 30px rgba(40,20,60,0.12);
    border: 1px solid rgba(0,0,0,0.03);
    transform-origin:center;
  }

  .front, .inside{
    position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center;
    backface-visibility:hidden; transition: transform 800ms cubic-bezier(.2,.9,.25,1);
  }

  .front{
    padding:22px; gap:8px;
  }
  .inside{ padding:18px; gap:12px; transform: rotateY(180deg); text-align:center; }

  .card-frame.open .front{ transform: rotateY(-180deg); }
  .card-frame.open .inside{ transform: rotateY(0deg); }

  .balloons{
    position:absolute; inset:14px auto auto 18px; width:120px; height:160px; pointer-events:none;
    display:flex; flex-direction:column; gap:8px; align-items:flex-start;
  }
  .balloon{
    width:40px; height:54px; border-radius:20px 20px 18px 18px; position:relative;
    transform-origin:center; animation: float 4s ease-in-out infinite;
    display:flex; align-items:center; justify-content:center; font-weight:700; color:white;
    box-shadow: 0 8px 18px rgba(20,10,50,0.12);
  }
  .balloon::after{ content:""; position:absolute; width:2px; height:60px; background:rgba(0,0,0,0.06); bottom:-58px; left:50%; transform:translateX(-50%); border-radius:2px;}

  .balloon.b1{ background: linear-gradient(180deg,#ff7ab6,#ff4d6d); animation-duration:4.2s; transform: rotate(-6deg); }
  .balloon.b2{ background: linear-gradient(180deg,#7af0d6,#16b38d); margin-left:14px; animation-duration:4.8s; transform: rotate(6deg); }
  .balloon.b3{ background: linear-gradient(180deg,#ffd76b,#ff9f43); margin-left:28px; animation-duration:3.9s; transform: rotate(-3deg); }
  @keyframes float {
    0%{ transform: translateY(0) rotate(0deg); }
    50%{ transform: translateY(-14px) rotate(3deg); }
    100%{ transform: translateY(0) rotate(0deg); }
  }

  .greeting{ font-size:28px; font-weight:800; color:#2b1332; letter-spacing:0.4px; }
  .greeting small{ display:block; font-size:12px; color:#6f6f6f; font-weight:600; margin-top:6px; }

  .cake{
    width:160px; height:110px; margin-top:8px; position:relative;
  }
  .cake .layer{ width:100%; height:36px; border-radius:12px; display:block; position:absolute; left:0; box-shadow: 0 8px 20px rgba(10,10,20,0.08); }
  .cake .layer.bottom{ bottom:0; background: linear-gradient(180deg,#fce3d6,#ffd9c6); transform: scaleY(1); }
  .cake .layer.top{ bottom:34px; height:46px; background: linear-gradient(180deg,#fff6f6,#ffeaea); }
  .candle{
    position:absolute; left:50%; transform:translateX(-50%); bottom:78px; width:8px; height:34px; border-radius:4px; background:linear-gradient(180deg,#ffef8b,#ffc14a);
    display:flex; align-items:flex-start; justify-content:center;
  }
  .flame{
    width:14px; height:18px; border-radius:10px; background: radial-gradient(circle at 40% 30%, #fff6d6, #ffb23a);
    margin-top:-10px; filter:drop-shadow(0 6px 8px rgba(255,150,20,0.2)); animation: flicker 900ms infinite;
  }
  @keyframes flicker {
    0%{ transform: translateY(0) rotate(0); opacity:1; }
    50%{ transform: translateY(-2px) rotate(-2deg); opacity:0.9; }
    100%{ transform: translateY(0) rotate(0); opacity:1; }
  }

  .message{
    padding:12px 14px; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,250,255,0.9));
    border:1px solid rgba(200,180,220,0.12); font-weight:700; color:#3b1450;
  }

  /* footer small */
  .note{ font-size:12px; color:#5a5a5a; margin-top:8px; }

  /* confetti canvas cover */
  canvas.confetti-canvas{ position:absolute; inset:0; pointer-events:none; z-index:40; }

  /* small responsive */
  @media (max-width:860px){
    .stage{ grid-template-columns: 1fr; gap:12px; padding:18px; }
    .preview{ order:-1; }
    .card-frame{ width:320px; height:460px; }
  }

</style>
</head>
<body>
  <div class="stage" role="application" aria-label="Birthday card">
    <div class="card-side">
      <div>
        <div class="title">üéà Creative Happy Birthday Card</div>
        <div class="subtitle">Enter a name and press <strong>Surprise!</strong> ‚Äî enjoy an animated card, tune & confetti.</div>
      </div>

      <div class="control">
        <input type="text" name="name" id="nameInput" placeholder="Type the name (e.g., Aman)" aria-label="Name input"/>
        <button class="cta" id="openBtn">Surprise!</button>
        <button class="ghost" id="resetBtn">Reset</button>
      </div>

      <div style="margin-top:8px;">
        <div class="note">Tip: click "Surprise!" multiple times for more confetti and sound variations.</div>
      </div>

      <div style="margin-top:auto; font-size:13px; color:#444;">
        Made with ‚ù§Ô∏è ‚Äî customize colors and text freely.
      </div>
    </div>

    <div class="preview">
      <div class="card-frame" id="cardFrame" aria-hidden="false" role="region" aria-label="Card preview">
        <canvas class="confetti-canvas" id="confettiCanvas" width="360" height="480"></canvas>

        <!-- front -->
        <div class="front" id="frontFace">
          <div class="balloons" aria-hidden="true">
            <div class="balloon b1">üíñ</div>
            <div class="balloon b2">üéÅ</div>
            <div class="balloon b3">üéâ</div>
          </div>

          <div class="greeting">Happy Birthday!</div>
          <div class="subtitle" style="text-align:center; max-width:240px;">A joyful day full of laughter, cake, and sparkling moments.</div>
          <div class="cake" aria-hidden="true">
            <span class="layer bottom"></span>
            <span class="layer top"></span>
            <div class="candle"><div class="flame"></div></div>
          </div>
          <div class="message">Click <strong>Surprise!</strong> to open me ‚ú®</div>
        </div>

        <!-- inside -->
        <div class="inside" id="insideFace" aria-hidden="true">
          <div style="font-size:18px; font-weight:800;" id="toName">Dear Friend,</div>
          <div style="font-size:14px; margin-top:8px; color:#4d2f54; max-width:290px;">
            Wishing you a day filled with love, joy and unforgettable memories. Keep shining and keep smiling!
          </div>
          <div style="margin-top:16px;">
            <div class="cake" style="transform:scale(0.9);">
              <span class="layer bottom"></span>
              <span class="layer top"></span>
              <div class="candle"><div class="flame"></div></div>
            </div>
          </div>
          <div style="margin-top:18px; display:flex; gap:10px;">
            <button class="cta" id="playBtn">Play Tune</button>
            <button class="ghost" id="moreConfetti">More Confetti</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ====== Simple Interaction & Audio + Confetti ====== */
const openBtn = document.getElementById('openBtn');
const resetBtn = document.getElementById('resetBtn');
const nameInput = document.getElementById('nameInput');
const cardFrame = document.getElementById('cardFrame');
const toName = document.getElementById('toName');
const playBtn = document.getElementById('playBtn');
const moreConfetti = document.getElementById('moreConfetti');

openBtn.addEventListener('click', () => {
  const name = (nameInput.value || 'Friend').trim();
  toName.textContent = 'Dear ' + name + ',';
  cardFrame.classList.add('open');
  startConfettiBurst();
  playShortMelody();
});

resetBtn.addEventListener('click', () => {
  cardFrame.classList.remove('open');
  nameInput.value = '';
});

playBtn.addEventListener('click', playShortMelody);
moreConfetti.addEventListener('click', startConfettiBurst);

/* ====== Confetti (lightweight) ====== */
const confCanvas = document.getElementById('confettiCanvas');
const ctx = confCanvas.getContext('2d');
let confettiPieces = [];
let confettiAnimating = false;

function randomBetween(a,b){ return a + Math.random()*(b-a); }

class Confetti {
  constructor(x,y, vx, vy, size, color, rot) {
    this.x=x;this.y=y;this.vx=vx;this.vy=vy;this.size=size;this.color=color;this.rot=rot; this.d = randomBetween(0.8,1.4);
  }
  update(dt){
    this.vy += 30*dt; // gravity
    this.x += this.vx*dt;
    this.y += this.vy*dt;
    this.rot += this.vx*0.05;
  }
  draw(ctx){
    ctx.save();
    ctx.translate(this.x,this.y);
    ctx.rotate(this.rot);
    ctx.fillStyle = this.color;
    ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size*0.6);
    ctx.restore();
  }
}

function spawnConfetti(n=80){
  const w = confCanvas.width; const h = confCanvas.height;
  const colors = ['#ff6b6b','#ffd166','#6bf2d4','#9b8cff','#ff9fd1','#ffb86b'];
  for(let i=0;i<n;i++){
    const x = randomBetween(w*0.2, w*0.8);
    const y = randomBetween(h*0.05, h*0.25);
    const vx = randomBetween(-100,100);
    const vy = randomBetween(-130, -40);
    const size = randomBetween(6,16);
    const color = colors[Math.floor(Math.random()*colors.length)];
    confettiPieces.push(new Confetti(x,y,vx,vy,size,color, Math.random()*3));
  }
}

let lastTime = 0;
function confettiLoop(t){
  if(!confettiAnimating) return;
  if(!lastTime) lastTime = t;
  const dt = Math.min((t-lastTime)/1000, 0.04);
  lastTime = t;

  ctx.clearRect(0,0,confCanvas.width, confCanvas.height);
  for(let i = confettiPieces.length-1; i>=0; i--){
    const p = confettiPieces[i];
    p.update(dt);
    p.draw(ctx);
    // remove if offscreen
    if(p.y > confCanvas.height + 60) confettiPieces.splice(i,1);
  }
  if(confettiPieces.length === 0){
    confettiAnimating = false;
    lastTime = 0;
    ctx.clearRect(0,0,confCanvas.width, confCanvas.height);
    return;
  }
  requestAnimationFrame(confettiLoop);
}

function startConfettiBurst(){
  // adapt canvas to device pixel ratio
  const ratio = window.devicePixelRatio || 1;
  confCanvas.width = 360 * ratio;
  confCanvas.height = 480 * ratio;
  confCanvas.style.width = '360px';
  confCanvas.style.height = '480px';
  ctx.setTransform(ratio,0,0,ratio,0,0);

  spawnConfetti(Math.floor(randomBetween(60,110)));
  if(!confettiAnimating){
    confettiAnimating = true;
    requestAnimationFrame(confettiLoop);
  }
}

/* ====== Small WebAudio Melody ====== */
let audioCtx;
function ensureAudio(){
  if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  return audioCtx;
}

function playShortMelody(){
  const ctx = ensureAudio();
  const now = ctx.currentTime;
  const master = ctx.createGain(); master.gain.value = 0.12;
  master.connect(ctx.destination);

  function tone(freq, dur, type='sine', when=now){
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.type = type; o.frequency.value = freq;
    o.connect(g); g.connect(master);
    g.gain.setValueAtTime(0, when);
    g.gain.linearRampToValueAtTime(1, when + 0.01);
    g.gain.exponentialRampToValueAtTime(0.001, when + dur);
    o.start(when);
    o.stop(when + dur + 0.05);
  }

  // little celebratory sequence (notes in Hz)
  const seq = [ 523.25, 659.25, 783.99, 1046.5, 783.99, 659.25 ];
  let t = now;
  for(let i=0;i<seq.length;i++){
    tone(seq[i], 0.18, i%2===0 ? 'sine' : 'triangle', t);
    t += 0.18;
  }
}

/* ====== Resize confetti canvas to match frame size ====== */
function resizeCanvasToFrame(){
  const rect = cardFrame.getBoundingClientRect();
  confCanvas.style.width = rect.width + 'px';
  confCanvas.style.height = rect.height + 'px';
  confCanvas.width = rect.width * (window.devicePixelRatio || 1);
  confCanvas.height = rect.height * (window.devicePixelRatio || 1);
  ctx.setTransform(window.devicePixelRatio || 1,0,0,window.devicePixelRatio || 1,0,0);
}
window.addEventListener('resize', resizeCanvasToFrame);
resizeCanvasToFrame();

/* Accessibility: keyboard support */
nameInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') openBtn.click(); });

/* Slight playful effect: click front face to toggle */
document.getElementById('frontFace').addEventListener('click', ()=> openBtn.click());

/* Small safeguard for autoplay policies ‚Äî resume audio context on user gesture */
document.body.addEventListener('click', ()=> {
  if (audioCtx && audioCtx.state === 'suspended') audioCtx.resume();
}, { once:true });

</script>
</body>
</html>
